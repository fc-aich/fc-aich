{{/* Akzeptiert entweder Strings:
gallery:
  - /uploads/p1.jpg
  - /uploads/p2.jpg
oder Objekte:
gallery:
  - image: /uploads/p1.jpg
    caption: "Jubel"
*/}}

{{ $items := .Params.gallery }}
{{ if not $items }}{{ return }}{{ end }}

<div class="gallery-grid">
  {{ range $i, $it := $items }}
    {{/* NICHT cond benutzen -> sonst wird index auf Strings ausgewertet! */}}
    {{ $src := "" }}
    {{ $cap := "" }}

    {{ if reflect.IsMap $it }}
      {{ $src = index $it "image" }}
      {{ $cap = index $it "caption" }}
    {{ else }}
      {{ $src = $it }}
    {{ end }}

    {{ if $src }}
      <figure class="gallery-item">
        <img loading="lazy" src="{{ $src | relURL }}" alt="{{ $.Title }} â€“ Bild {{ add $i 1 }}">
        {{ with $cap }}<figcaption>{{ . }}</figcaption>{{ end }}
      </figure>
    {{ end }}
  {{ end }}
</div>
